# ğŸ“Š Code Coverage Report

**Generated:** 21/12/2025 - 02:19:27  
**Total Tests:** 246 âœ… (All passing)

---

## ğŸ“ˆ Overall Metrics

| Metric | Coverage | Status |
|--------|----------|--------|
| **Line Coverage** | **85%** | ğŸŸ¢ Excellent |
| **Branch Coverage** | **97%** | ğŸŸ¢ Excellent |
| **Method Coverage** | PRO Feature | ğŸ“ Available with sponsorship |

### Coverage Details

- **Covered Lines:** 137
- **Uncovered Lines:** 24
- **Coverable Lines:** 161
- **Total Lines:** 408
- **Covered Branches:** 130
- **Total Branches:** 134

---

## ğŸ“¦ Assembly Breakdown: CnabApi

### 1. **CnabApi.Models.Transaction** - ğŸŸ¢ 100% Line Coverage
- **Lines:** 27 Covered / 0 Uncovered
- **Branches:** 88 Covered / 88 Total (100%)
- **Status:** Perfect coverage âœ…

### 2. **CnabApi.Controllers.TransactionsController** - ğŸŸ¢ 100% Line Coverage
- **Lines:** 7 Covered / 0 Uncovered
- **Branches:** Not measured
- **Status:** All endpoints covered âœ…

### 3. **CnabApi.Services.CnabUploadService** - ğŸŸ¢ 100% Line Coverage
- **Lines:** 9 Covered / 0 Uncovered
- **Branches:** Not measured
- **Status:** All upload logic covered âœ…

### 4. **CnabApi.Services.CnabParserService** - ğŸŸ¡ 88.5% Line Coverage
- **Lines:** 77 Covered / 10 Uncovered
- **Branches:** 38 Covered / 38 Total (100%)
- **Uncovered Lines:** Edge case validations and error handlers
- **Status:** Core parsing logic fully tested âœ…

### 5. **CnabApi.Common.Result<T>** - ğŸŸ¡ 56.2% Line Coverage
- **Lines:** 9 Covered / 7 Uncovered
- **Branches:** 2 Covered / 4 Total (50%)
- **Status:** Partial coverage for generic error wrapper

### 6. **CnabApi.Common.Result** - ğŸŸ¡ 53.3% Line Coverage
- **Lines:** 8 Covered / 7 Uncovered
- **Branches:** 2 Covered / 4 Total (50%)
- **Status:** Partial coverage for error wrapper

---

## âš ï¸ Risk Hotspots

Two methods flagged with high complexity:

| Method | Class | Crap Score | Cyclomatic Complexity |
|--------|-------|------------|----------------------|
| `GetTransactionDescription()` | CnabApi.Models.Transaction | 42 | 42 |
| `GetTransactionNature()` | CnabApi.Models.Transaction | 42 | 42 |

**Recommendation:** These methods use large switch statements for transaction categorization. Consider refactoring with strategy pattern or lookup tables.

---

## ğŸ“ Test Summary

- **Total Test Cases:** 246
- **Passed:** 246 âœ…
- **Failed:** 0
- **Skipped:** 0
- **Duration:** ~2 seconds

### Test Categories

- âœ… Controllers: Transactions, Authentication
- âœ… Services: CNAB Parser, Upload, File handling, Transactions
- âœ… Models: Transaction entity
- âœ… Utilities: Pagination helpers
- âœ… Integration tests for critical flows

---

## ğŸ¯ Coverage Goals

| Target | Current | Status |
|--------|---------|--------|
| Line Coverage | 85% | âœ… Met (>80% target) |
| Branch Coverage | 97% | âœ… Excellent |
| Core Logic | ~95% | âœ… Covered |
| Error Handling | ~70% | âš ï¸ Partial |

---

## ğŸ’¡ Recommendations

1. **Simplify high-complexity methods** in Transaction model
   - Consider splitting `GetTransactionDescription()` into smaller methods
   - Use lookup dictionaries instead of large switch statements

2. **Increase Result wrapper coverage** to 80%+
   - Add more negative test cases
   - Test error scenarios more comprehensively

3. **Continue maintaining 85%+ coverage**
   - Pre-commit hooks to verify coverage thresholds
   - CI/CD integration to block merges below 80%

4. **Monitor branch coverage**
   - Current 97% is excellent
   - Maintain for all new code

---

## ğŸ“Š Files Analyzed

- 1 Assembly (CnabApi)
- 6 Classes
- 5 Source Files

**Report Generated By:** ReportGenerator 5.5.1.0  
**Access Full Report:** Open `backend.Tests/CoverageReport/index.html` in a browser
